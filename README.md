# dr-manager
## Overview
These API was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project. By using the
[OpenAPI-Spec](https://github.com/swagger-api/swagger-core/wiki) on top of OpenAPI 3.0 specifications.

This API uses the [Connexion](https://github.com/zalando/connexion) library on top of Flask.
# Developing

Some steps are **required** to start developing with this repository.

## If you are using MS Windows
ðŸš¨ðŸš¨ðŸš¨This development environment isn't`compatible natively with MS Windows --> Go WSLðŸš¨ðŸš¨ðŸš¨

To develop with this repo at this moment you need to install WSL (Windows Subsytem for Linux)
.**Trust what I'm saying.**

Microsoft has a good quick start for this. 
https://docs.microsoft.com/en-us/windows/wsl/install-win10 

## Prerequisites 
1. Unix Based OS or WSL for the MS
2. Docker installed on OS
3. Python 3.9 or higher (https://www.python.org/downloads/)
4. Visual Code (https://code.visualstudio.com/download) (pre configured tasks are avaialable to visual debugging)
		- If you are using MS Windows, install this extension: https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.

## Setup
1. Clone this repository
2. Open this project on visual code
3. Open terminal on the project root
4. - To configure your development environment, execute:
        ````shell
        make configure_devel
        ````
	- Activate python environment (This can be different if you no /bash terminals)
        ````shell
         source venv/bin/activate
        ````
	- Build docker images (Redis, Celery, Celery Beats, drm_appointment, drm_financial):
        
        ***Depending on how docker is installed on your system, you will need to use sudo**
        ````shell
        make build
        ````
	- Run your containers
        
        ***Depending on how docker is installed on your system, you will need to use sudo**
        ````shell
        make up
        ````

5. drm_appointments API specifications and tests resides here: http://localhost:5000/1.0.0/ui/
6. drm_financial API resides here: http://localhost:5001/1.0.0/ui/
7. You can follow Celery tasks here:  http://localhost:5555/
8. Unit tests? You can execute them (no need to have containers running. Remember to activate your virtual environment): 
        ````shell
        make init_test
        ````

## Bonus
1. All the commits have a pre-commit with black reformat and flake on webhook. Standard Code Rulez!
2. Hot Reload works smoothly, just set FLASK_DEBUG to 0 on docker-compose.yaml
3. Unit tests use sqlite in memory (go fast litlle parrot)
4. This can be easily deployed to kubernetes on cloud
5. This was developed on macOS Big Sur and works perfectly on my machine ðŸ¤£



Have fun ðŸ˜ƒ
